<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.togest.dao.PointHisotryData5CDao">
	<resultMap id="BaseResultMap" type="com.togest.domain.PointHisotryData5CDTO">

		<id column="id" property="id" />
		<result column="check_time" property="checkTime" />
		<result column="pantograph_photo" property="pantographPhoto" />
		<result column="skate_photo" property="skatePhoto" />
		<result column="locomotive_photo" property="locomotivePhoto" />
		<result column="point_id" property="pointId" />
		<result column="camera_no" property="cameraNo" />
		<result column="train_no" property="trainNo" />
		<result column="primitive_data_file" property="primitiveDataFile" />
		<result column="p_name" property="pointName" />

	</resultMap>
	<sql id="Base_Column_List">
		a.id,
		a.check_time,a.pantograph_photo,a.skate_photo,a.locomotive_photo,a.point_id,a.camera_no,a.train_no,a.primitive_data_file,p.point_name
		as p_name

	</sql>
	<sql id="Base_Table">
		5c_point_hisotry_data a
		left join 5c_point p on p.id =
		a.point_id


	</sql>
	<sql id="condition">
		<if test="checkTime != null">
			and a.check_time = #{checkTime}
		</if>
		<if test="pointId != null">
			and a.point_id = #{pointId}
		</if>
		<if test="cameraNo != null">
			and a.camera_no = #{cameraNo}
		</if>
		<if test="trainNo != null">
			and a.train_no = #{trainNo}
		</if>

	</sql>

	<insert id="insert" parameterType="com.togest.domain.PointHisotryData5CDTO">
		insert into
		5c_point_hisotry_data(id,check_time,pantograph_photo,skate_photo,locomotive_photo,point_id,camera_no,train_no,primitive_data_file)
		values(#{id}, #{checkTime},
		#{pantographPhoto},
		#{skatePhoto},
		#{locomotivePhoto}, #{pointId},#{cameraNo},#{trainNo},#{primitiveDataFile})

	</insert>

	<update id="update" parameterType="com.togest.domain.PointHisotryData5CDTO">
		update 5c_point_hisotry_data
		set
		check_time =
		#{checkTime},
		pantograph_photo = #{pantographPhoto},
		skate_photo =
		#{skatePhoto},
		locomotive_photo = #{locomotivePhoto},
		camera_no = #{cameraNo},
		train_no = #{trainNo},
		point_id =
		#{pointId}
		where id=#{id}
	</update>

	<select id="getByKey" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List"></include>
		from
		<include refid="Base_Table"></include>
		where a.id=#{id}
	</select>

	<select id="getByEntity" parameterType="com.togest.domain.PointHisotryData5CDTO">
		select
		<include refid="Base_Column_List"></include>
		from
		<include refid="Base_Table"></include>
		<where>
			<include refid="condition"></include>
		</where>

	</select>
	<select id="findList" parameterType="com.togest.domain.Point5CDTO"
		resultMap="BaseResultMap">

		select
		<include refid="Base_Column_List"></include>
		from
		<include refid="Base_Table"></include>
		<where>
			<include refid="condition"></include>
		</where>
		order by a.check_time desc
	</select>

	<delete id="delete" parameterType="java.lang.String">
		delete from
		5c_point_hisotry_data
		where id=#{id}
	</delete>
	<delete id="deletes" parameterType="java.util.List">
		delete from 5c_point_hisotry_data
		where id in
		<foreach item="item" collection="ids" separator="," open="("
			close=")" index="">
			#{item}
		</foreach>
	</delete>
</mapper>