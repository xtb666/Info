<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.togest.dao.Point5CDao">
	<resultMap id="BaseResultMap" type="com.togest.domain.Point5CDTO">
		<id column="id" property="id" />
		<result column="line_id" property="lineId" />
		<result column="section_id" property="sectionId" />
		<result column="station_id" property="stationId" />
		<result column="install_pillar_id" property="installPillarId" />
		<result column="install_glb" property="installGlb" />
		<result column="install_date" property="installDate" />
		<result column="point_name" property="pointName" />
		<result column="code" property="code" />
		<result column="track" property="track" />
		<result column="direction" property="direction" />
		<result column="l_name" property="lineName" />
		<result column="psa_name" property="stationName" />
		<result column="p_name" property="installPillarName" />

	</resultMap>

	<sql id="Base_Column_List">
		a.id, a.line_id, a.section_id, a.station_id,
		a.install_pillar_id,
		a.install_glb,
		a.install_date,
		a.point_name, a.code,
		a.track,
		a.direction,
		l.name as l_name,
		psa.name as psa_name,
		p.name as p_name
	</sql>

	<sql id="Base_Table">
		5c_point a
		left join p_line l on l.id=a.line_id
		left join
		p_supply_arm psa on psa.id = a.station_id
		left join jcw_equ_pillar_info
		p on p.id = a.install_pillar_id
	</sql>

	<sql id="condition">
		<if test="lineId != null">
			and a.line_id = #{lineId}
		</if>
		<if test="sectionId != null">
			and a.section_id = #{sectionId}
		</if>
		<if test="stationId != null">
			and a.station_id = #{stationId}
		</if>
		<if test="installPillarId != null">
			and a.install_pillar_id = #{installPillarId}
		</if>
		<if test="installGlb != null">
			and a.install_glb = #{installGlb}
		</if>
		<if test="installDate != null">
			and a.install_date = #{installDate}
		</if>
		<if test="pointName != null">
			and a.point_name = #{pointName}
		</if>
		<if test="code != null">
			and a.code = #{code}
		</if>
		<if test="track != null">
			and a.track = #{track}
		</if>
		<if test="direction != null">
			and a.direction = #{direction}
		</if>
		<if test="lineName != null">
			and l.name = #{lineName}
		</if>
		<if test="stationName != null">
			and psa.name = #{stationName}
		</if>
		<if test="installPillarName != null">
			and p.name = #{installPillarName}
		</if>

	</sql>

	<insert id="insert" parameterType="com.togest.domain.Point5CDTO">
		insert into 5c_point (id,
		line_id, section_id,
		station_id, install_pillar_id, install_glb,
		install_date, point_name, code,track,direction
		)
		values (#{id}, #{lineId},
		#{sectionId},
		#{stationId}, #{installPillarId}, #{installGlb},
		#{installDate},
		#{pointName},
		#{code},#{track},#{direction}
		)
	</insert>

	<update id="update" parameterType="com.togest.domain.Point5CDTO">
		update 5c_point
		set
		line_id =
		#{lineId},
		station_id = #{stationId},
		install_pillar_id =
		#{installPillarId},
		install_glb = #{installGlb},
		install_date =
		#{installDate},
		point_name = #{pointName},
		code = #{code},
		direction = #{direction},
		track = #{track}
		where id=#{id}

	</update>

	<select id="getByKey" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List"></include>
		from
		<include refid="Base_Table"></include>
		where a.id=#{id}

	</select>


	<select id="getByEntity" parameterType="com.togest.domain.Point5CDTO"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List"></include>
		from
		<include refid="Base_Table"></include>
		<where>

			<include refid="condition"></include>
		</where>

	</select>

	<select id="findList" parameterType="com.togest.domain.Point5CDTO"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List"></include>
		from
		<include refid="Base_Table"></include>
		<where>

			<include refid="condition"></include>
		</where>

	</select>
	<delete id="delete" parameterType="java.lang.String">
		delete from 5c_point
		where id=#{id}
	</delete>
	<delete id="deletes" parameterType="java.util.List">
		delete from 5c_point
		where id in 
		<foreach item="item" collection="ids" separator="," open="("
					close=")" index="">
					#{item}
				</foreach>
	</delete>



</mapper>